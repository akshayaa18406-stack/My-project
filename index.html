<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Canteen Management System</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:'Poppins',sans-serif;}
body{background:#fff;min-height:100vh;display:flex;justify-content:center;align-items:center;}
#splash{position:fixed;inset:0;background:#ff6f00;display:flex;justify-content:center;align-items:center;z-index:10;animation:fadeOut 1s ease forwards;animation-delay:2.5s;}
#logo{width:150px;animation:zoomLogo 2.5s ease forwards;}
@keyframes zoomLogo{0%{transform:scale(.3);opacity:0;}60%{transform:scale(1.2);opacity:1;}100%{transform:scale(1);}}
@keyframes fadeOut{to{opacity:0;visibility:hidden;}}
#main{display:none;width:100%;max-width:420px;padding:20px;text-align:center;}
h1{margin-bottom:20px;color:#ff6f00;font-weight:600;}
.filter-bar{display:flex;justify-content:space-around;background:#fff3e0;padding:10px;border-radius:25px;margin-bottom:20px;}
.filter-btn{border:none;background:transparent;font-weight:600;font-size:14px;padding:8px 18px;border-radius:20px;cursor:pointer;}
.filter-btn.active{background:#ff6f00;color:#fff;}
.food-grid{display:grid;grid-template-columns:1fr 1fr;gap:15px;}
.food-card{background:#fff;border-radius:18px;padding:12px;box-shadow:0 6px 15px rgba(0,0,0,.1);text-align:center;}
.food-card img{width:70px;margin-bottom:8px;}
.food-card h4{font-size:14px;margin-bottom:5px;}
.food-card span{font-size:13px;font-weight:600;color:#ff6f00;}
.qty-box{margin-top:8px;display:flex;justify-content:center;align-items:center;gap:10px;}
.qty-btn{border:none;background:#ff6f00;color:white;padding:5px 10px;border-radius:50%;font-size:16px;cursor:pointer;}
.bill-box{margin-top:20px;background:#fff3e0;padding:15px;border-radius:15px;}
.pay-btn{margin:5px;padding:8px 18px;border:none;border-radius:20px;font-weight:600;cursor:pointer;}
.gpay{background:#1a73e8;color:white;}
.cash{background:#2e7d32;color:white;}
footer{margin-top:15px;font-size:13px;color:#777;}

#qrBox,#billPage,#successPage,#historyPage{
position:fixed;
inset:0;
background:white;
display:none;
justify-content:center;
align-items:center;
z-index:300;
padding:20px;
text-align:center;
}

.tick{font-size:90px;color:#2e7d32;}
</style>
</head>

<body>

<audio id="successSound">
<source src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3">
</audio>

<div id="splash">
<img id="logo" src="https://cdn-icons-png.flaticon.com/512/3075/3075977.png"/>
</div>

<div id="main">
<h1>College Canteen</h1>

<div class="filter-bar">
<button class="filter-btn active" onclick="filterMenu('all')">All</button>
<button class="filter-btn" onclick="filterMenu('veg')">Veg</button>
<button class="filter-btn" onclick="filterMenu('nonveg')">Non-Veg</button>
<button class="filter-btn" onclick="showHistory()">History</button>
</div>

<div id="foodGrid" class="food-grid"></div>

<div class="bill-box">
<h3>Total : â‚¹ <span id="total">0</span></h3>
<p id="items"></p>
<button class="pay-btn gpay" onclick="pay('GPay')">GPay</button>
<button class="pay-btn cash" onclick="pay('Cash')">Cash</button>
</div>

<footer>Powered by Akshayaa P</footer>
</div>

<!-- QR -->
<div id="qrBox">
<div>
<h3>Scan to Pay</h3>
<img id="qrImg"><br><br>
<button class="pay-btn cash" onclick="closeQR()">Close</button>
</div>
</div>

<!-- BILL -->
<div id="billPage">
<div style="width:300px;border:1px dashed #999;padding:15px;font-family:monospace;">
<h3>College Canteen</h3><hr>
<table width="100%" style="font-size:13px;">
<thead>
<tr>
<th align="left">Item</th>
<th align="center">Qty</th>
<th align="right">Price</th>
<th align="right">Amt</th>
</tr>
</thead>
<tbody id="billTable"></tbody>
</table>
<hr>
<p style="display:flex;justify-content:space-between;">
<span>Sub Total</span><span>â‚¹ <span id="subTotal"></span></span>
</p>
<p style="display:flex;justify-content:space-between;">
<span>Container Charge</span><span>â‚¹ 30</span>
</p>
<hr>
<h3 style="display:flex;justify-content:space-between;">
<span>Grand Total</span><span>â‚¹ <span id="grandTotal"></span></span>
</h3>
<p>Thank You! Visit Again ðŸ˜Š</p>
<button class="pay-btn cash" onclick="confirmOrder()">Confirm</button>
</div>
</div>

<!-- SUCCESS -->
<div id="successPage">
<div class="tick">âœ”</div>
<h2>Thanks! Your order has been placed</h2>
</div>

<!-- HISTORY -->
<div id="historyPage">
<h2>Order History</h2>
<div id="historyList"></div><br>
<button class="pay-btn cash" onclick="closeHistory()">Close</button>
</div>

<script>
setTimeout(()=>{
document.getElementById('splash').style.display='none';
document.getElementById('main').style.display='block';
},3000);

const foods=[
{name:'Idly',price:20,type:'veg',img:'https://cdn-icons-png.flaticon.com/512/590/590749.png',qty:0},
{name:'Dosa',price:40,type:'veg',img:'https://cdn-icons-png.flaticon.com/512/3075/3075977.png',qty:0},
{name:'Veg Fried Rice',price:80,type:'veg',img:'https://cdn-icons-png.flaticon.com/512/1046/1046784.png',qty:0},
{name:'Veg Biriyani',price:90,type:'veg',img:'https://cdn-icons-png.flaticon.com/512/857/857681.png',qty:0},
{name:'Chicken Biriyani',price:140,type:'nonveg',img:'https://cdn-icons-png.flaticon.com/512/1046/1046769.png',qty:0},
{name:'Chicken Fried Rice',price:120,type:'nonveg',img:'https://cdn-icons-png.flaticon.com/512/2921/2921822.png',qty:0},
{name:'Egg Fried Rice',price:100,type:'nonveg',img:'https://cdn-icons-png.flaticon.com/512/135/135620.png',qty:0},
{name:'Parota + Chicken',price:110,type:'nonveg',img:'https://cdn-icons-png.flaticon.com/512/857/857681.png',qty:0}
];

function renderFoods(list){
const grid=document.getElementById('foodGrid');
grid.innerHTML=list.map((f,i)=>`
<div class="food-card">
<img src="${f.img}">
<h4>${f.name}</h4>
<span>â‚¹${f.price}</span>
<div class="qty-box">
<button class="qty-btn" onclick="decreaseQty(${i})">âˆ’</button>
<div>${f.qty}</div>
<button class="qty-btn" onclick="increaseQty(${i})">+</button>
</div></div>`).join('');
}

function increaseQty(i){foods[i].qty++;updateBill();renderFoods(foods);}
function decreaseQty(i){if(foods[i].qty>0)foods[i].qty--;updateBill();renderFoods(foods);}

function updateBill(){
let total=0,list="";
foods.forEach(f=>{
if(f.qty>0){total+=f.qty*f.price;list+=`${f.name} x ${f.qty}, `;}
});
document.getElementById('total').innerText=total;
document.getElementById('items').innerText=list;
}

function pay(type){
let total=document.getElementById('total').innerText;
if(total==0){alert("Please select items first");return;}
if(type==="Cash"){
generateBill();
document.getElementById('main').style.display="none";
document.getElementById('billPage').style.display="flex";
}
if(type==="GPay"){
document.getElementById('qrBox').style.display="flex";
document.getElementById('qrImg').src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=Pay Rs "+total;
}
}

function generateBill(){
let table="",subTotal=0;
foods.forEach(f=>{
if(f.qty>0){
let amt=f.qty*f.price;
subTotal+=amt;
table+=`<tr><td>${f.name}</td><td align="center">${f.qty}</td><td align="right">${f.price}</td><td align="right">${amt}</td></tr>`;
}
});
document.getElementById("billTable").innerHTML=table;
document.getElementById("subTotal").innerText=subTotal;
document.getElementById("grandTotal").innerText=subTotal+30;
}

function confirmOrder(){
saveHistory();
document.getElementById('billPage').style.display="none";
document.getElementById('successPage').style.display="flex";
document.getElementById('successSound').play();
}

function saveHistory(){
let history=JSON.parse(localStorage.getItem("orders"))||[];
history.push({items:document.getElementById('items').innerText,total:document.getElementById('total').innerText,time:new Date().toLocaleString()});
localStorage.setItem("orders",JSON.stringify(history));
}

function showHistory(){
let history=JSON.parse(localStorage.getItem("orders"))||[];
let html="";
history.forEach((o,i)=>{
html+=`<p><b>Order ${i+1}</b><br>${o.items}<br>Total â‚¹${o.total}<br>${o.time}</p><hr>`;
});
document.getElementById('historyList').innerHTML=html||"No orders yet";
document.getElementById('historyPage').style.display="flex";
}

function closeHistory(){document.getElementById('historyPage').style.display="none";}
function closeQR(){document.getElementById('qrBox').style.display="none";}

function filterMenu(type){
document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
event.target.classList.add('active');
if(type==='all')renderFoods(foods);
else renderFoods(foods.filter(f=>f.type===type));
}

renderFoods(foods);
</script>

</body>
</html>
